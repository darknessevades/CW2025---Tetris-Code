<?xml version="1.0" encoding="UTF-8"?>

<?import com.comp2042.GameOverPanel?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.Group?>
<?import javafx.scene.layout.*?>
<?import java.net.URL?>

<!-- Root StackPane to allow overlay -->
<StackPane xmlns:fx="http://javafx.com/fxml"
           fx:controller="com.comp2042.GuiController"
           prefWidth="500"
           prefHeight="850"
           maxWidth="500"
           maxHeight="850">

    <!-- Main Game Layout -->
    <BorderPane style="-fx-background-color: #1a1a1a;">

        <!-- Left Area - Stats and Preview -->
        <left>
            <VBox fx:id="statsPanel"
                  spacing="20"
                  prefWidth="180"
                  style="-fx-padding: 20; -fx-background-color: #2a2a2a; -fx-border-color: #444; -fx-border-width: 0 2 0 0;">

                <VBox spacing="5">
                    <Label text="LEVEL" style="-fx-text-fill: #888; -fx-font-size: 12; -fx-font-weight: bold;"/>
                    <Label fx:id="levelLabel"
                           text="1"
                           style="-fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;"/>
                </VBox>

                <VBox spacing="5">
                    <Label text="LINES" style="-fx-text-fill: #888; -fx-font-size: 12; -fx-font-weight: bold;"/>
                    <Label fx:id="linesLabel"
                           text="0"
                           style="-fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;"/>
                </VBox>

                <!-- Score -->
                <VBox spacing="5">
                    <Label text="SCORE" style="-fx-text-fill: #888; -fx-font-size: 12; -fx-font-weight: bold;"/>
                    <Label fx:id="scoreLabel"
                           text="0"
                           style="-fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;"/>
                </VBox>

                <!-- Next Piece Preview -->
                <VBox spacing="10">
                    <Label text="NEXT" style="-fx-text-fill: #888; -fx-font-size: 12; -fx-font-weight: bold;"/>
                    <GridPane fx:id="nextBrickPanel"
                              hgap="1"
                              vgap="1"
                              prefWidth="60"
                              prefHeight="60"
                              style="-fx-border-color: #555; -fx-border-width: 2; -fx-background-color: #1a1a1a; -fx-padding: 5;">
                    </GridPane>
                </VBox>

                <VBox spacing="3" style="-fx-padding: 20 0 0 0;">
                    <Label text="CONTROLS" style="-fx-text-fill: white; -fx-font-size: 15; -fx-font-weight: bold;"/>
                    <Label text="← → Move" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                    <Label text="↑ Rotate" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                    <Label text="↓ Fall Faster" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                    <Label text="SPACE Hard Drop" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                    <Label text="P Pause Game" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                    <Label text="N New Game" style="-fx-text-fill: white; -fx-font-size: 11;"/>
                </VBox>

            </VBox>
        </left>

        <!-- Center Area - Game Board -->
        <center>
            <Pane prefWidth="400" prefHeight="800">
                <!-- Game Board Background -->
                <BorderPane styleClass="gameBoard" fx:id="gameBoard">
                    <center>
                        <GridPane fx:id="gamePanel"
                                  hgap="1"
                                  vgap="1"
                                  style="-fx-background-color: #0a0a0a;"/>
                    </center>
                </BorderPane>

                <!-- Ghost Piece Layer  -->
                <Pane fx:id="ghostPane"
                      mouseTransparent="true"/>

                <!-- Falling Brick Panel -->
                <GridPane fx:id="brickPanel"
                          vgap="1"
                          hgap="1"
                          mouseTransparent="true"/>


            </Pane>
        </center>
    </BorderPane>

    <!-- Score Notifications - Centered overlay -->
    <Group fx:id="groupNotification"
           StackPane.alignment="CENTER"/>

    <!-- Game Over Overlay -->
    <VBox alignment="CENTER"
          style="-fx-background-color: rgba(0, 0, 0, 0.8);"
          visible="false"
          fx:id="gameOverOverlay">

        <GameOverPanel fx:id="gameOverPanel"
                       maxWidth="350"
                       maxHeight="200"
                       style="-fx-background-color: rgba(200, 0, 0, 0.95);
                              -fx-padding: 30;
                              -fx-border-radius: 10;
                              -fx-background-radius: 10;"/>
    </VBox>

    <!-- Pause Overlay - Centered on entire window -->
    <VBox alignment="CENTER"
          mouseTransparent="false"
          style="-fx-background-color: rgba(0, 0, 0, 0.7);"
          visible="false"
          fx:id="pauseOverlay">

        <VBox alignment="CENTER"
              spacing="20"
              maxWidth="300"
              maxHeight="150"
              style="-fx-background-color: rgba(50, 50, 50, 0.95);
                 -fx-padding: 30;
                 -fx-border-radius: 10;
                 -fx-background-radius: 10;">

            <Label text="PAUSED"
                   style="-fx-font-size: 36; -fx-text-fill: red; -fx-font-weight: bold;"/>

            <Label text="Press P to resume"
                   style="-fx-font-size: 18; -fx-text-fill: white;"/>
        </VBox>
    </VBox>

    <stylesheets>
        <URL value="@window_style.css"/>
    </stylesheets>
</StackPane>